import{Z as v,i as U,r as a,c as i,a as t,b as m,d as k,w as b,g as L,h as w,t as p,o as u,F as V,j as h,e as A}from"./app-a1pcr069.js";import{L as C}from"./Layout-CCj0oP25.js";import{T as S}from"./TextInput-BV_CAnm2.js";import{F as B}from"./FileInput-D0d9ka2x.js";import{S as F}from"./SelectInput-LDo5GZlZ.js";import{L as j}from"./LoadingButton-D7uFng42.js";import{_ as x}from"./FlashMessages-CFOcLP80.js";import"./moment-BbZOc2s_.js";import"./v4-SoommWqA.js";const E={components:{FileInput:B,Head:v,Link:U,LoadingButton:j,SelectInput:F,TextInput:S},layout:C,props:{user:Object,auth:Object,countries:Array,roles:Array,cities:Array,title:String},remember:"form",data(){return{user_access:this.$page.props.auth.user.access,form:this.$inertia.form({_method:"put",first_name:this.user.first_name,last_name:this.user.last_name,email:this.user.email,phone:this.user.phone,city:this.user.city,address:this.user.address,country_id:this.user.country_id,password:"",role:this.user.role,role_id:this.user.role_id,photo:null})}},created(){},methods:{setDefaultValue(l,o,s){const f=l.find(e=>e.name.match(new RegExp(s+".*")));f&&(this.form[o]=f.id)},update(){this.form.post(this.route("users.update",this.user.id),{onSuccess:()=>this.form.reset("password","photo")})},destroy(){confirm("Are you sure you want to delete this user?")&&this.$inertia.delete(route("users.destroy",this.user.id))},restore(){confirm("Are you sure you want to restore this user?")&&this.$inertia.put(route("users.restore",this.user.id))}}},N={class:"max-w-full bg-white rounded-md shadow overflow-hidden"},D={class:"flex flex-wrap -mb-8 -mr-6 p-8"},H=["value"],I=["value"],P={class:"w-full lg:w-1/3 flex items-center justify-start"},T=["src"],O={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"};function R(l,o,s,f,e,d){const g=a("Head"),n=a("text-input"),y=a("select-input"),_=a("file-input"),c=a("loading-button");return u(),i("div",null,[t(g,{title:s.title},null,8,["title"]),m("div",N,[m("form",{onSubmit:o[11]||(o[11]=k((...r)=>d.update&&d.update(...r),["prevent"]))},[m("div",D,[t(n,{modelValue:e.form.first_name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.first_name=r),error:e.form.errors.first_name,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("First name")},null,8,["modelValue","error","label"]),t(n,{modelValue:e.form.last_name,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.last_name=r),error:e.form.errors.last_name,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("Last name")},null,8,["modelValue","error","label"]),t(n,{modelValue:e.form.email,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.email=r),error:e.form.errors.email,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("Email")},null,8,["modelValue","error","label"]),t(n,{modelValue:e.form.phone,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.phone=r),error:e.form.errors.phone,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("Phone")},null,8,["modelValue","error","label"]),t(n,{modelValue:e.form.city,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.city=r),error:e.form.errors.city,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("City")},null,8,["modelValue","error","label"]),t(n,{modelValue:e.form.address,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.address=r),error:e.form.errors.address,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("Address")},null,8,["modelValue","error","label"]),t(y,{modelValue:e.form.country_id,"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.country_id=r),error:e.form.errors.country_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Country")},{default:b(()=>[o[12]||(o[12]=m("option",{value:null},null,-1)),(u(!0),i(V,null,h(s.countries,r=>(u(),i("option",{key:r.id,value:r.id},p(l.$t(r.name)),9,H))),128))]),_:1},8,["modelValue","error","label"]),t(n,{modelValue:e.form.password,"onUpdate:modelValue":o[7]||(o[7]=r=>e.form.password=r),error:e.form.errors.password,class:"pb-8 pr-6 w-full lg:w-1/3",type:"password",autocomplete:"new-password",label:l.$t("Password")},null,8,["modelValue","error","label"]),s.user.id!==s.auth.user.id?(u(),L(y,{key:0,modelValue:e.form.role_id,"onUpdate:modelValue":o[8]||(o[8]=r=>e.form.role_id=r),error:e.form.errors.role,class:"pb-8 pr-6 w-full lg:w-1/3",label:l.$t("Role")},{default:b(()=>[o[13]||(o[13]=m("option",{value:null},null,-1)),(u(!0),i(V,null,h(s.roles,r=>(u(),i("option",{key:r.id,value:r.id},p(l.$t(r.name)),9,I))),128))]),_:1},8,["modelValue","error","label"])):w("",!0),t(_,{modelValue:e.form.photo,"onUpdate:modelValue":o[9]||(o[9]=r=>e.form.photo=r),error:e.form.errors.photo,class:"pb-8 pr-6 w-full lg:w-1/3",type:"file",accept:"image/*",label:"Photo"},null,8,["modelValue","error"]),m("div",P,[s.user.photo_path?(u(),i("img",{key:0,class:"block mb-2 w-8 h-8 rounded-full",src:s.user.photo_path},null,8,T)):w("",!0)])]),m("div",O,[s.user.id!==s.auth.user.id&&e.user_access.user.delete?(u(),i("button",{key:0,class:"text-red-600 hover:underline",tabindex:"-1",type:"button",onClick:o[10]||(o[10]=(...r)=>d.destroy&&d.destroy(...r))},p(l.$t("Delete User")),1)):w("",!0),t(c,{loading:e.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:b(()=>[A(p(l.$t("Update User")),1)]),_:1},8,["loading"])])],32)])])}const X=x(E,[["render",R]]);export{X as default};
