import{I as L,D as U,h as q}from"./moment-BbZOc2s_.js";import{_ as S,F as H,L as N}from"./FlashMessages-CFOcLP80.js";import{i as z,r as g,o as n,c as d,F as k,j as x,p as A,C as B,a,w as l,b as t,t as i,n as C,g as w,h as $,k as D,D as M,E as P,e as f,m as T,q as Y}from"./app-a1pcr069.js";const E={components:{Icon:L,Link:z},data(){return{user:null,menu_items:[{name:"Dashboard",route:"dashboard",url:"dashboard",icon:"dashboard"},{name:"Tickets",route:"tickets",url:"tickets",icon:"ticket"}],enable_option:{}}},methods:{isUrl(...e){let s=this.$page.url.substr(1);return s=s.replace("dashboard/",""),e[0]===""?s==="":e.filter(o=>s.startsWith(o)).length},addActiveClass(e){e.currentTarget.classList.toggle("hover")}},created(){this.user=this.$page.props.auth.user;const e=this.user.access;let s={};this.$page.props.enable_options&&JSON.parse(this.$page.props.enable_options.value).forEach(c=>{s[c.slug]=!!c.value}),s.chat&&(e.chat.read||e.chat.update||e.chat.create||e.chat.delete)&&this.menu_items.push({name:"Chat",route:"chat",url:"chat",icon:"chat"}),s.faq&&(e.faq.read||e.faq.update||e.faq.create||e.faq.delete)&&this.menu_items.push({name:"FAQs",route:"faqs",url:"faqs",icon:"faq"}),s.blog&&(e.blog.read||e.blog.update||e.blog.create||e.blog.delete)&&this.menu_items.push({name:"Blog",route:"posts",url:"posts",icon:"post"}),s.kb&&(e.knowledge_base.read||e.knowledge_base.update||e.knowledge_base.create||e.knowledge_base.delete)&&this.menu_items.push({name:"Knowledge Base",route:"knowledge_base",url:"knowledge_base",icon:"knowledge"}),(e.customer.read||e.customer.update||e.customer.create||e.customer.delete)&&this.menu_items.push({name:"Customers",route:"customers",url:"customers",icon:"all_users"}),s.note&&this.menu_items.push({name:"Notes",route:"notes",url:"notes",icon:"notes"}),s.contact&&(e.contact.read||e.contact.update||e.contact.create||e.contact.delete)&&this.menu_items.push({name:"Contacts",route:"contacts",url:"contacts",icon:"contact"}),s.organization&&(e.organization.read||e.organization.update||e.organization.create||e.organization.delete)&&this.menu_items.push({name:"Organizations",route:"organizations",url:"organizations",icon:"office"}),(e.user.read||e.user.update||e.user.create||e.user.delete)&&this.menu_items.push({name:"Manage Users",route:"users",url:"users",icon:"users"});const o=[];this.user.role.slug==="admin"&&o.push({name:"User Roles",route:"roles",url:"settings/roles",icon:"user_role"}),(e.global.read||e.global.update||e.global.create||e.global.delete)&&o.push({name:"Global",route:"global",url:"settings/global",icon:"global_setting"}),(e.global.read||e.global.update||e.global.create||e.global.delete)&&o.push({name:"Custom fields",route:"tickets.builder",url:"settings/custom-form",icon:"form-builder"}),(e.department.read||e.department.update||e.department.create||e.department.delete)&&o.push({name:"Departments",route:"departments",url:"settings/departments",icon:"departments"}),(e.category.read||e.category.update||e.category.create||e.category.delete)&&o.push({name:"Categories",route:"categories",url:"settings/categories",icon:"category"}),(e.status.read||e.status.update||e.status.create||e.status.delete)&&o.push({name:"Status",route:"statuses",url:"settings/statuses",icon:"status"}),(e.priority.read||e.priority.update||e.priority.create||e.priority.delete)&&o.push({name:"Priorities",route:"priorities",url:"settings/priorities",icon:"priorities"}),(e.type.read||e.type.update||e.type.create||e.type.delete)&&o.push({name:"Types",route:"types",url:"settings/types",icon:"types"}),(e.language.read||e.language.update||e.language.create||e.language.delete)&&o.push({name:"Languages",route:"languages",url:"settings/languages",icon:"edit"}),(e.email_template.read||e.email_template.update||e.email_template.create||e.email_template.delete)&&o.push({name:"Email Templates",route:"templates",url:"settings/templates",icon:"email"}),(e.smtp.read||e.smtp.update||e.smtp.create||e.smtp.delete)&&o.push({name:"SMTP Mail",route:"settings.smtp",url:"settings/smtp",icon:"email_template"}),(e.pusher.read||e.pusher.update||e.pusher.create||e.pusher.delete)&&o.push({name:"Pusher Chat",route:"settings.pusher",url:"settings/pusher",icon:"chat"}),this.user.role.slug==="admin"&&o.push({name:"Email to ticket",route:"settings.piping",url:"settings/piping",icon:"ticket"}),o.length&&this.menu_items.push({name:"Settings",route:"",url:"settings",icon:"settings",submenu:o}),(e.front_page.read||e.front_page.update||e.front_page.create||e.front_page.delete)&&this.menu_items.push({name:"Front Pages",route:"",url:"front_pages",icon:"gear",submenu:[{name:"Home",route:"front_pages.page",url:"front_pages/home",icon:"page",param:"home"},{name:"Contact",route:"front_pages.page",url:"front_pages/contact",icon:"page",param:"contact"},{name:"Services",route:"front_pages.page",url:"front_pages/services",icon:"page",param:"services"},{name:"Privacy Policy",route:"front_pages.page",url:"front_pages/privacy",icon:"page",param:"privacy"},{name:"Terms of services",route:"front_pages.page",url:"front_pages/terms",icon:"page",param:"terms"},{name:"Footer",route:"front_pages.page",url:"front_pages/footer",icon:"page",param:"footer"}]}),this.user.role.slug==="admin"&&this.menu_items.push({name:"System Update",route:"settings.update",url:"settings/update",icon:"archive"})}},F={class:"menu__name"},G={key:0,class:"sub-menu-items"},I={class:"menu__name"};function V(e,s,o,h,c,p){const v=g("icon"),m=g("Link");return n(),d("div",null,[(n(!0),d(k,null,x(c.menu_items,(u,b)=>(n(),d("div",A({class:["menu-item",p.isUrl(u.url)?" active":""],key:b},B(u.submenu?{click:r=>p.addActiveClass(r)}:{})),[a(m,{class:C(["flex items-center group py-3 menu-link",{"have-sub-menu":u.submenu}]),href:u.route?e.route(u.route):"#"},{default:l(()=>[a(v,{name:u.icon,class:"w-5 h-5 mr-3 rtl:ml-3 menu__icon"},null,8,["name"]),t("div",F,i(e.$t(u.name)),1)]),_:2},1032,["href","class"]),u.submenu?(n(),d("div",G,[(n(!0),d(k,null,x(u.submenu,(r,y)=>(n(),w(m,{class:C(["sub-menu-item",this.isUrl(r.url)?" active":""]),key:y,href:r.param?e.route(r.route,r.param):e.route(r.route)},{default:l(()=>[r.icon?(n(),w(v,{key:0,name:r.icon,class:"w-4 h-4 mr-1 rtl:ml-1 menu__icon"},null,8,["name"])):(n(),w(v,{key:1,name:"dash",class:"w-4 h-4 mr-1 rtl:mr-1 menu__icon"})),t("div",I,i(e.$t(r.name)),1)]),_:2},1032,["class","href"]))),128))])):$("",!0)],16))),128))])}const j=S(E,[["render",V]]),O={components:{Dropdown:U,FlashMessages:H,Icon:L,Logo:N,Link:z,MainMenu:j},props:{title:String},data(){return{time:"",current_mode:"light",modes:["dark","light"],edit_route:"",locale:this.$page.props.auth.user.locale||this.$page.props.settings.default_language}},computed:{selected_language(){return this.$page.props.languages.find(e=>e.code===this.$page.props.locale)},languages_except_selected(){return this.$page.props.languages.filter(e=>e.code!==this.$page.props.locale)}},methods:{updateLanguage(e){D.post(this.route("language",e),{}).then(s=>{s.data&&window.location.reload()})},generateGreetings(){const e=this.moment().format("HH");return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Noon":e>=15&&e<18?"Good Afternoon":e>=18&&e<20?"Good Evening":"Hello"},switchMode(){this.current_mode=this.current_mode==="light"?"dark":"light",localStorage.setItem("current_mode",this.current_mode)},detectCurrentUrl(){const e=this.$page.url,s=e.split("/");let o=["edit","create"].includes(e.substring(e.lastIndexOf("/")+1));o||(o=s[s.length-2]==="tickets");let h=e.split("/")[2];["settings","front_pages"].includes(h)&&(h=e.split("/")[3]),this.edit_route=o?h:""}},updated(){this.detectCurrentUrl()},created(){console.log("hello"),this.moment=q;let e=this;localStorage.getItem("current_mode")&&(this.current_mode=localStorage.getItem("current_mode")),e.time=e.moment().format("MMMM Do YYYY, h:mm A"),window.setInterval(function(){e.time=e.moment().format("MMMM Do YYYY, h:mm A")},1e3),this.detectCurrentUrl(),console.log(this.locale,M()),M()!==this.locale&&(console.log(this.locale),P(this.locale))}},R=["dir"],J={class:"md:flex md:flex-col"},K={class:"md:h-screen md:flex md:flex-col"},Q={class:"md:flex md:shrink-0"},W={class:"md:shrink-0 md:py-2 md:w-60 flex items-center justify-between md:justify-center sidebar-left-top"},X={class:"mt-2 px-8 py-4 bg-hd-sidebar rounded shadow-lg"},Z={class:"bg-white w-full p-4 md:py-2 md:pr-12 md:pl-8 text-sm flex justify-first items-center top_bar"},ee={class:"placement-top-left"},te={class:"mt-1 welcome_text"},se={class:"display-time"},oe={class:"time"},ae={class:"placement-top-right"},re={class:"flex items-center cursor-pointer group language_menu"},ne={class:"font-bold mr-1 rtl:mr-0 whitespace-nowrap w-[7rem]"},ie={class:"rtl:mr-[6px]"},le={class:"py-0 shadow-xl rounded text-sm language_menu_list"},ce=["onClick"],ue={class:"lang_name rtl:mr-[6px]"},de={class:"flex items-center cursor-pointer group"},pe={class:"mr-1 whitespace-nowrap"},me=["alt","src"],ge={key:1,src:"/images/svg/profile.svg",class:"w-5 h-5",alt:"user profile"},he={class:"hidden md:inline"},_e={class:"shadow-xl bg-white rounded text-sm"},fe={class:"md:flex md:flex-grow md:overflow-hidden"},ve={class:"md:flex-1 md:overflow-y-auto","scroll-region":""},be={class:"container-head"},we={class:"ch-left"},ye={class:"page-title"},ke={class:"breadcrumb text-sm"},xe={key:1,class:"b-item"},Ce={class:"b-item"},$e={class:"ch-right cursor-pointer"},Me=["aria-label"],Le={class:"sec-cont"};function Se(e,s,o,h,c,p){const v=g("logo"),m=g("Link"),u=g("main-menu"),b=g("dropdown"),r=g("icon"),y=g("flash-messages");return n(),d("div",{class:C(["layout-app",c.current_mode]),dir:e.$page.props.dir},[s[6]||(s[6]=t("div",{id:"dropdown"},null,-1)),t("div",J,[t("div",K,[t("div",Q,[t("div",W,[a(m,{class:"mt-1",href:"/"},{default:l(()=>[a(v,{class:"help-desk-logo"})]),_:1}),a(b,{class:"md:hidden",className:"small-menu",placement:"bottom-end"},{default:l(()=>s[1]||(s[1]=[t("svg",{class:"w-6 h-6 mobile-menu-selector",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})],-1)])),dropdown:l(()=>[t("div",X,[a(u,{auth:e.auth},null,8,["auth"])])]),_:1})]),t("div",Z,[t("div",ee,[t("div",te,[f(i(e.$t(p.generateGreetings()))+" ",1),t("span",null,i(e.$page.props.auth.user.first_name)+"!",1)]),t("div",se,[t("span",oe,i(c.time),1)])]),t("div",ae,[a(b,{class:"mt-1 rtl:ml-2 language_menu_wrapper",placement:"bottom-end"},{default:l(()=>[t("div",re,[t("div",ne,[a(r,{class:"w-5 h-5",name:p.selected_language.code},null,8,["name"]),s[2]||(s[2]=f()),t("span",ie,i(p.selected_language.name),1)]),a(r,{class:"w-5 h-5 drop-down-caret-icon",name:"cheveron-down"})])]),dropdown:l(()=>[t("div",le,[(n(!0),d(k,null,x(p.languages_except_selected,_=>(n(),d("div",{key:_.code,class:"flex gap-2 cursor-pointer px-3 py-2 hover:bg-indigo-500 hover:text-white",onClick:ze=>p.updateLanguage(_.code)},[a(r,{class:"w-5 h-5",name:_.code},null,8,["name"]),s[3]||(s[3]=f()),t("span",ue,i(_.name),1)],8,ce))),128))])]),_:1}),a(b,{class:"mt-1 select_user",placement:"bottom-end"},{default:l(()=>[t("div",de,[t("div",pe,[e.$page.props.auth.user.photo?(n(),d("img",{key:0,class:"user_photo",alt:e.$page.props.auth.user.first_name,src:e.$page.props.auth.user.photo},null,8,me)):(n(),d("img",ge)),t("span",null,i(e.$page.props.auth.user.first_name),1),t("span",he,i(e.$page.props.auth.user.last_name),1)]),a(r,{class:"w-5 h-5 drop-down-caret-icon",name:"cheveron-down"})])]),dropdown:l(()=>[t("div",_e,[a(m,{class:"block px-6 py-2 hover:bg-indigo-500 hover:text-white",href:e.route("users.edit.profile")},{default:l(()=>[f(i(e.$t("Edit Profile")),1)]),_:1},8,["href"]),a(m,{class:"block px-6 py-2 hover:bg-indigo-500 hover:text-white w-full text-left",href:e.route("logout"),method:"delete",as:"button"},{default:l(()=>[f(i(e.$t("Logout")),1)]),_:1},8,["href"])])]),_:1})])])]),t("div",fe,[a(u,{class:"hidden md:block sidebar shrink-0 md:w-60 overflow-y-auto"}),t("div",ve,[t("div",be,[t("div",we,[t("h1",ye,i(e.$t(o.title)),1),t("div",ke,[a(m,{href:e.route("dashboard")},{default:l(()=>[a(r,{class:"w-3 h-3",name:"home"})]),_:1},8,["href"]),s[4]||(s[4]=t("span",{class:"b-item"},"/",-1)),c.edit_route?(n(),w(m,{key:0,href:e.route(c.edit_route),class:"capitalize"},{default:l(()=>[f(i(c.edit_route),1)]),_:1},8,["href"])):$("",!0),c.edit_route?(n(),d("span",xe,"/")):$("",!0),t("span",Ce,i(e.$t(o.title)),1)])]),t("div",$e,[t("button",{class:"theme-toggle",id:"theme-toggle",title:"Toggles light & dark","aria-label":c.current_mode,"aria-live":"polite",onClick:s[0]||(s[0]=(..._)=>p.switchMode&&p.switchMode(..._))},s[5]||(s[5]=[T('<svg class="sun-and-moon" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask class="moon" id="moon-mask"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle cx="24" cy="10" r="6" fill="black"></circle></mask><circle class="sun" cx="12" cy="12" r="6" mask="url(#moon-mask)" fill="currentColor"></circle><g class="sun-beams" stroke="currentColor"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg>',1)]),8,Me)])]),a(y),t("div",Le,[Y(e.$slots,"default")])])])])])],10,R)}const Ne=S(O,[["render",Se]]);export{Ne as L};
