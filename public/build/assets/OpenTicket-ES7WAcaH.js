import{Z as U,i as S,r as f,c as i,a as m,m as B,b as o,d as I,w as b,g as x,h as u,t as a,F as c,j as g,e as _,f as v,v as L,o as s,W as j,y as M}from"./app-a1pcr069.js";import{_ as T,L as F}from"./FlashMessages-CFOcLP80.js";import{L as A}from"./Layout-CelK4wxD.js";import{I as E}from"./moment-BbZOc2s_.js";import{T as H}from"./TextInput-BV_CAnm2.js";import{S as q}from"./SelectInput-LDo5GZlZ.js";import{L as z}from"./LoadingButton-D7uFng42.js";import{_ as D,C as R,B as N,E as O,I as P,M as Q,P as G,U as W,H as Y,a as Z,L as J,b as K,T as X,c as $,d as ee,e as te,f as re,g as le}from"./UploadAdapter-IKL1r5hU.js";import"./v4-SoommWqA.js";const oe={metaInfo:{title:"Home"},layout:A,components:{Logo:F,Icon:E,LoadingButton:z,SelectInput:q,TextInput:H,Head:U,Link:S,Ckeditor:D},props:{all_categories:Array,departments:Array,types:Array,title:String,hide_ticket_fields:Array,auth:Object,custom_fields:Object},remember:"form",data(){return{editor:R,accept_terms:!1,categories:[],sub_categories:[],editorConfig:{plugins:[N,O,P,Q,G,W,Y,Z,J,K,X,$,ee,te,re],toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","outdent","indent","|","insertTable","blockQuote","|","imageUpload","mediaEmbed","|","undo","redo"],table:{toolbar:["tableColumn","tableRow","mergeTableCells"]},extraPlugins:[function(t){t.plugins.get("FileRepository").createUploadAdapter=n=>new le(n)}]},form:this.$inertia.form({first_name:"",last_name:"",email:"",department_id:null,category_id:null,sub_category_id:null,type_id:null,subject:null,details:"",files:[],custom_field:{}})}},methods:{getCategories(){this.categories=this.all_categories.filter(l=>l.department_id===this.form.department_id),this.form.category_id=null,this.$refs.category.selected=null},getSubCategories(){this.sub_categories=this.all_categories.filter(l=>l.parent_id===this.form.category_id),this.form.sub_category_id=null,this.$refs.sub_category.selected=null},uploadFiles(){this.form.files=this.$refs.files.files},store(){this.accept_terms||alert("You must need to accept the terms and condition."),this.form.post(this.route("ticket_store"),{onSuccess:()=>{this.form.reset()}})},fileInputChange(l){let t=l.target.files;for(let n=0;n<t.length;n++)this.form.files.push(t[n])},fileRemove(l,t){this.form.files.splice(t,1)},getFileSize(l){const t=Math.floor(Math.log(l)/Math.log(1024));return(l/Math.pow(1024,t)).toFixed(2)*1+" "+["B","kB","MB","GB","TB"][t]},fileBrowse(){this.$refs.file.click()}},created(){this.auth.user&&(this.form.first_name=this.auth.user.first_name,this.form.last_name=this.auth.user.last_name,this.form.email=this.auth.user.email);for(let l=0;l<this.custom_fields.length;l++)this.custom_fields[l.name]&&(this.form.custom_field[this.custom_fields[l.name]]="")}},se={class:"pt-20 pb-10 lg:pt-[120px] lg:pb-20 bg-gray-50"},ae={class:"container"},ie={class:"px-5 pt-8"},ne={class:"flex flex-wrap"},de={value:null},me=["value"],ue={value:null},pe=["value"],fe={value:null},ce=["value"],ge={value:null},be=["value"],_e={class:"pt-2 pb-8 w-full"},he={class:"form-label"},ye={class:"grid gap-6 mb-6"},xe={class:"flex flex-col w-full"},ve=["for"],ke={key:0,class:"pl-2 text-xs"},we=["onUpdate:modelValue","type","id","placeholder","required"],Ve=["id","onUpdate:modelValue","placeholder"],Ce={key:2,class:"mt-1 text-sm text-gray-500 dark:text-gray-300"},Ue={class:"pr-6 pb-8 w-full lg:w-full flex-col"},Se={class:"flex-1 pr-1"},Be={class:"text-gray-500 text-xs"},Ie=["onClick"],Le={class:"flex items-start mb-5"},je={class:"flex items-center h-5"},Me={for:"terms",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},Te=["href"],Fe={class:"px-4 py-4 border-t border-gray-100 flex justify-end"};function Ae(l,t,n,Ee,r,d){const k=f("Head"),h=f("text-input"),y=f("select-input"),w=f("ckeditor"),V=f("icon"),C=f("loading-button");return s(),i("div",null,[m(k,{title:"Home"}),t[16]||(t[16]=B('<section class="relative z-10 overflow-hidden bg-primary pt-[120px] pb-[100px] md:pt-[130px] lg:pt-[160px]"><div class="container"><div class="-mx-4 flex flex-wrap items-center"><div class="w-full px-4"><div class="text-center"><h1 class="text-4xl font-semibold text-white">Open a ticket</h1></div></div></div></div><div><span class="absolute top-0 left-0 z-[-1]"><img src="/landing/images/header/shape-1.svg" alt=""></span><span class="absolute top-0 right-0 z-[-1]"><img src="/landing/images/header/shape-2.svg" alt=""></span></div></section>',1)),o("section",se,[o("div",ae,[o("form",{class:"card mt-2 p-4 rounded shadow-xl overflow-hidden",onSubmit:t[14]||(t[14]=I((...e)=>d.store&&d.store(...e),["prevent"])),enctype:"multipart/form-data"},[o("div",ie,[o("div",ne,[m(h,{modelValue:r.form.first_name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.first_name=e),error:r.form.errors.last_name,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("First name")},null,8,["modelValue","error","label"]),m(h,{modelValue:r.form.last_name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.last_name=e),error:r.form.errors.last_name,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Last name")},null,8,["modelValue","error","label"]),m(h,{modelValue:r.form.email,"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.email=e),error:r.form.errors.email,class:"pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Email Address")},null,8,["modelValue","error","label"]),m(h,{modelValue:r.form.subject,"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.subject=e),error:r.form.errors.subject,class:"pb-5 w-full lg:w-2/3 pr-6",label:l.$t("Subject")},null,8,["modelValue","error","label"]),m(y,{modelValue:r.form.type_id,"onUpdate:modelValue":t[4]||(t[4]=e=>r.form.type_id=e),error:r.form.errors.type_id,class:"pb-5 pr-6 md:col-span-6 lg:w-1/3",label:l.$t("Ticket type")},{default:b(()=>[o("option",de,a(l.$t("Select a type")),1),(s(!0),i(c,null,g(n.types,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,me))),128))]),_:1},8,["modelValue","error","label"]),n.hide_ticket_fields.includes("department")?u("",!0):(s(),x(y,{key:0,onChange:t[5]||(t[5]=e=>d.getCategories()),modelValue:r.form.department_id,"onUpdate:modelValue":t[6]||(t[6]=e=>r.form.department_id=e),error:r.form.errors.department_id,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Department")},{default:b(()=>[o("option",ue,a(l.$t("Select a department")),1),(s(!0),i(c,null,g(n.departments,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,pe))),128))]),_:1},8,["modelValue","error","label"])),r.form.department_id?(s(),x(y,{key:1,ref:"category",onChange:t[7]||(t[7]=e=>d.getSubCategories()),modelValue:r.form.category_id,"onUpdate:modelValue":t[8]||(t[8]=e=>r.form.category_id=e),error:r.form.errors.category_id,class:"pb-5 pr-6 md:col-span-6 lg:w-1/3",label:l.$t("Category")},{default:b(()=>[o("option",fe,a(l.$t("Select a category")),1),(s(!0),i(c,null,g(r.categories,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,ce))),128))]),_:1},8,["modelValue","error","label"])):u("",!0),r.form.category_id?(s(),x(y,{key:2,ref:"sub_category",modelValue:r.form.sub_category_id,"onUpdate:modelValue":t[9]||(t[9]=e=>r.form.sub_category_id=e),error:r.form.errors.sub_category_id,class:"pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Sub Category")},{default:b(()=>[o("option",ge,a(l.$t("Select a sub category")),1),(s(!0),i(c,null,g(r.sub_categories,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,be))),128))]),_:1},8,["modelValue","error","label"])):u("",!0),o("div",_e,[o("label",he,a(l.$t("Request Details"))+":",1),m(w,{id:"ticketDetails",editor:r.editor,modelValue:r.form.details,"onUpdate:modelValue":t[10]||(t[10]=e=>r.form.details=e),error:r.form.errors.details,config:r.editorConfig},null,8,["editor","modelValue","error","config"])])]),o("div",ye,[(s(!0),i(c,null,g(n.custom_fields,e=>(s(),i("div",{class:"flex w-full",key:e.id},[o("div",xe,[o("label",{for:["checkbox"].includes(e.type)?null:"ticket_field_"+e.id,class:"block mb-2 text-sm text-gray-900 dark:text-white"},[_(a(e.label)+" ",1),e.required?u("",!0):(s(),i("small",ke,"(optional)"))],8,ve),["text","email","number"].includes(e.type)?v((s(),i("input",{key:0,"onUpdate:modelValue":p=>r.form.custom_field[e.name]=p,type:e.type,id:"ticket_field_"+e.id,placeholder:e.placeholder,required:e.required,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500"},null,8,we)),[[j,r.form.custom_field[e.name]]]):u("",!0),e.type==="textarea"?v((s(),i("textarea",{key:1,id:"ticket_field_"+e.id,rows:"2","onUpdate:modelValue":p=>r.form.custom_field[e.name]=p,class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:e.placeholder},null,8,Ve)),[[M,r.form.custom_field[e.name]]]):u("",!0),e.hint?(s(),i("p",Ce,a(e.hint),1)):u("",!0)])]))),128))]),o("input",{ref:"file",type:"file",accept:".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf, .zip",class:"hidden",multiple:"multiple",onChange:t[11]||(t[11]=(...e)=>d.fileInputChange&&d.fileInputChange(...e))},null,544),o("div",Ue,[o("button",{type:"button",class:"btn flex justify-center items-center border-0",onClick:t[12]||(t[12]=(...e)=>d.fileBrowse&&d.fileBrowse(...e))},[m(V,{name:"file",class:"flex-shrink-0 h-8 fill-gray-400 pr-1"}),t[15]||(t[15]=_()),o("h4",null,a(l.$t("Attach files")),1)]),r.form.files.length?(s(!0),i(c,{key:0},g(r.form.files,(e,p)=>(s(),i("div",{class:"flex items-center justify-between pr-6 pt-8 w-full lg:w-1/2",key:p},[o("div",Se,[_(a(e.name)+" ",1),o("span",Be,"("+a(d.getFileSize(e.size))+")",1)]),o("button",{type:"button",class:"btn flex justify-center items-center",onClick:He=>d.fileRemove(e,p)},a(l.$t("Remove")),9,Ie)]))),128)):u("",!0)]),o("div",Le,[o("div",je,[v(o("input",{id:"terms",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=e=>r.accept_terms=e),class:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800",required:""},null,512),[[L,r.accept_terms]])]),o("label",Me,[_(a(l.$t("I agree with the"))+" ",1),o("a",{href:this.route("terms_service"),target:"_blank",class:"text-blue-600 hover:underline dark:text-blue-500"},a(l.$t("terms and conditions")),9,Te)])])]),o("div",Fe,[m(C,{loading:r.form.processing,class:"rounded-lg bg-primary py-3 px-6 text-base font-medium text-white duration-300 ease-in-out hover:bg-opacity-80",type:"submit"},{default:b(()=>[_(a(l.$t("Submit")),1)]),_:1},8,["loading"])])],32)])])])}const We=T(oe,[["render",Ae]]);export{We as default};
