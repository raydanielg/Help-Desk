import{r as g,o,c as a,t as n,h as d,e as h,g as f,b as r,p as L,a as m,n as B,z as C,d as x,F as v,j as w,i as N,Z as H,k as S,f as k,X as y,w as D}from"./app-a1pcr069.js";import{I,h as R}from"./moment-BbZOc2s_.js";import{L as z}from"./Layout-CCj0oP25.js";import{T as P}from"./TextInput-BV_CAnm2.js";import{_ as A}from"./FlashMessages-CFOcLP80.js";import{v as T}from"./v4-SoommWqA.js";import{S as q}from"./SelectInput-LDo5GZlZ.js";import{T as O}from"./TextareaInput-CORLWzzy.js";import{L as K}from"./LoadingButton-D7uFng42.js";import{S as Q}from"./SelectInputFilter-fntCZT8t.js";import{_ as G,C as X,B as Z,E as J,I as W,M as Y,P as $,U as ee,H as te,a as se,L as ie,b as le,T as re,c as oe,d as ne,e as ae,f as de,g as ue}from"./UploadAdapter-IKL1r5hU.js";const ce={components:{Icon:I},inheritAttrs:!1,props:{id:{type:String,default(){return`text-input-${T()}`}},type:{type:String,default:"text"},error:String,label:String,editable:{type:[Number,Boolean],default:!1},value:{type:String,default:""},is_required:{type:Boolean,default:!1},placeholder:String,modelValue:String},emits:["update:modelValue"],data(){return{editItem:!1,itemValue:this.value}},methods:{focus(){this.$refs.input.focus()},select(){this.$refs.input.select()},setSelectionRange(i,e){this.$refs.input.setSelectionRange(i,e)}}},me=["for"],fe={key:1,class:"font-light text-sm flex gap-3"},ge={key:2,class:"w-25 flex items-center"},he=["id","type","placeholder","value"],_e={key:3,class:"form-error"};function be(i,e,t,U,s,c){const _=g("icon");return o(),a("div",{class:B(i.$attrs.class)},[t.label?(o(),a("label",{key:0,class:"form-label",for:t.id},n(t.label)+" "+n(t.is_required?"*":""),9,me)):d("",!0),s.itemValue&&!s.editItem?(o(),a("div",fe,[h(n(t.modelValue)+" ",1),t.editable?(o(),f(_,{key:0,name:"edit",onClick:e[0]||(e[0]=u=>s.editItem=!s.editItem),class:"w-4 h-4 mr-1 cursor-pointer"})):d("",!0)])):d("",!0),s.editItem?(o(),a("div",ge,[r("input",L({id:t.id,ref:"input"},{...i.$attrs,class:null},{class:["form-input",{error:t.error}],type:t.type,placeholder:t.placeholder,value:t.modelValue,onInput:e[1]||(e[1]=u=>i.$emit("update:modelValue",u.target.value))}),null,16,he),m(_,{onClick:e[2]||(e[2]=u=>s.editItem=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})])):d("",!0),t.error?(o(),a("div",_e,n(t.error),1)):d("",!0)],2)}const pe=A(ce,[["render",be]]),ke={components:{Icon:I},inheritAttrs:!1,props:{placeholder:{type:String,default:""},onInput:{type:Function},items:{type:Array},id:{type:String,default(){return`select-input-filter-${T()}`}},editable:[Number,Boolean],error:String,label:String,value:String,modelValue:[String,Number,Boolean]},emits:["update:modelValue","update:value","change"],data(){return{selectedValue:"",selected:this.modelValue,isListVisible:!1,editItem:!1,itemValue:this.value}},watch:{selected(i){this.$emit("update:modelValue",i),this.editItem=!1}},created(){},mounted(){document.addEventListener("click",this.close)},methods:{close(i){this.$el.contains(i.target)||(this.isListVisible=!1)},onFocus(){this.isListVisible=!0},selectItem(i,e){this.$refs.input.value=i.name,this.selected=i.id,this.selectedValue=i.name,this.isListVisible=!1,this.editItem=!1,this.itemValue=i.name,this.$emit("update:modelValue",i.id),this.$emit("update:value",i.name),this.$emit("change",e)},focus(){this.$refs.input.focus()},select(){this.$refs.input.select()}}},ye={class:"font-bold text-sm mb-1"},ve={key:0,class:"font-light text-sm flex gap-3"},we={class:"w-25 flex items-center"},xe=["id","placeholder"],Ve={key:1,class:"form-error"},Ce={key:2,class:"i__filter__list"},Se=["onClick"];function Ie(i,e,t,U,s,c){const _=g("icon");return o(),a("div",{class:B(["sel__filter",i.$attrs.class]),ref:"sel__filter"},[r("div",ye,n(i.$t(t.label)),1),s.itemValue&&!s.editItem?(o(),a("div",ve,[h(n(s.itemValue)+" ",1),t.editable?(o(),f(_,{key:0,name:"edit",onClick:e[0]||(e[0]=u=>s.editItem=!s.editItem),class:"w-4 h-4 mr-1 cursor-pointer"})):d("",!0)])):d("",!0),r("div",we,[s.editItem?(o(),a("input",L({key:0,id:t.id,ref:"input",class:["form-select w-25",{error:t.error}],type:"text"},{...i.$attrs,class:null},{placeholder:t.placeholder,onInput:e[1]||(e[1]=(...u)=>t.onInput&&t.onInput(...u)),onFocus:e[2]||(e[2]=(...u)=>c.onFocus&&c.onFocus(...u)),onKeydown:[e[3]||(e[3]=C(x((...u)=>i.onArrowDown&&i.onArrowDown(...u),["prevent"]),["down"])),e[4]||(e[4]=C(x((...u)=>i.onArrowUp&&i.onArrowUp(...u),["prevent"]),["up"])),e[5]||(e[5]=C(x((...u)=>i.selectCurrentSelection&&i.selectCurrentSelection(...u),["prevent"]),["enter","tab"]))],autocomplete:"off"}),null,16,xe)):d("",!0),s.editItem?(o(),f(_,{key:1,onClick:e[6]||(e[6]=u=>s.editItem=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})):d("",!0)]),t.error?(o(),a("div",Ve,n(t.error),1)):d("",!0),s.isListVisible&&t.items.length?(o(),a("div",Ce,[r("ul",null,[(o(!0),a(v,null,w(t.items,(u,V)=>(o(),a("li",{key:V,onClick:p=>c.selectItem(u,i.e)},n(u.name),9,Se))),128))])])):d("",!0)],2)}const Ae=A(ke,[["render",Ie]]),Ue={components:{LoadingButton:K,SelectInput:q,TextInput:P,TextEditInput:pe,TextareaInput:O,Link:N,Head:H,Icon:I,SelectInputFilter:Q,SelectEditInput:Ae,Ckeditor:G},layout:z,props:{title:String,ticket:Object,priorities:Array,statuses:Array,types:Array,departments:Array,all_categories:{required:!1},customers:Array,usersExceptCustomers:Array,attachments:Array,comments:Array,auth:Object,entries:Object,hidden_fields:Object},remember:!1,data(){return{user:this.$page.props.auth.user,type_status:[],categories:this.all_categories.filter(i=>i.department_id===this.ticket.department_id),sub_categories:this.all_categories.filter(i=>i.parent_id===this.ticket.category_id),comment:"",editCustomer:!1,enableEditor:!1,user_access:this.$page.props.auth.user.access,editor:X,editorConfig:{plugins:[Z,J,W,Y,$,ee,te,se,ie,le,re,oe,ne,ae,de],toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","outdent","indent","|","insertTable","blockQuote","|","imageUpload","mediaEmbed","|","undo","redo"],table:{toolbar:["tableColumn","tableRow","mergeTableCells"]},extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=t=>new ue(t)}]},form:this.$inertia.form({user_id:this.ticket.user_id,priority_id:this.ticket.priority_id,status_id:this.ticket.status_id,department_id:this.ticket.department_id,category_id:this.ticket.category_id??null,sub_category_id:this.ticket.sub_category_id,assigned_to:this.ticket.assigned_to,type_id:this.ticket.type_id,subject:this.ticket.subject,details:this.ticket.details,files:this.ticket.files,comments:this.ticket.comments,created_at:this.ticket.created_at,removedFiles:[],rating:0,review:""})}},created(){console.log(this.ticket.category_id),this.auth.user.role.slug==="customer"&&this.statuses.length?this.type_status=this.statuses.filter(i=>i.id===this.form.status_id||i.name.match(/Close.*/)):this.type_status=this.statuses,this.moment=R},methods:{getCategories(){this.ticket.category="N/A",this.form.category_id=null,this.categories=this.all_categories.filter(i=>i.department_id===this.form.department_id)},getSubCategories(){this.sub_categories=this.all_categories.filter(i=>i.parent_id===this.form.category_id),this.ticket.sub_category="N/A",this.form.sub_category_id=null},doFilter(i){S.get(this.route("filter.customers",{search:i.target.value})).then(e=>{this.customers.splice(0,this.customers.length,...e.data)})},doFilterUsersExceptCustomer(i){S.get(this.route("filter.users_except_customer",{search:i.target.value})).then(e=>{this.usersExceptCustomers.splice(0,this.usersExceptCustomers.length,...e.data)})},fileInputChange(i){let e=i.target.files;for(let t=0;t<e.length;t++)this.form.files.push(e[t])},fileRemove(i,e){this.form.files.splice(e,1)},fileBrowse(){this.$refs.file.click()},downloadAttachment(i){const e=document.createElement("a");e.href=window.location.origin+"/files/"+i.path,e.download=i.name,e.click()},removeAttachment(i,e){this.attachments.splice(e,1),this.form.removedFiles.push(i.id)},getFileSize(i){const e=Math.floor(Math.log(i)/Math.log(1024));return(i/Math.pow(1024,e)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][e]},uploadFiles(){this.form.files=this.$refs.files.files},update(){this.form.post(this.route("tickets.update",this.ticket.id)),this.form.files=[],this.form.comment=""},destroy(){confirm("Are you sure you want to delete this ticket?")&&this.$inertia.delete(this.route("tickets.destroy",this.ticket.id))},restore(){confirm("Are you sure you want to restore this ticket?")&&this.$inertia.put(this.route("tickets.restore",this.ticket.id))},submitComment(){var i=this;const e={comment:this.comment,user_id:this.user.id,_token:this.$page.props.csrf_token,ticket_id:this.ticket.id};console.log(e),this.comment="",S.post(this.route("ticket.comment"),e).then(t=>{t.data&&i.comments.push(t.data),this.$emit("comment submitted!")}).catch(t=>{console.log(t)})}}},Ee={class:"flex flex-wrap"},Fe={class:"max-w-full lg:w-3/5"},Le={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},Be={class:"assigned_user pr-6 pb-8 w-full lg:w-1/3 flex flex-col"},Te={class:"font-bold text-sm mb-1"},je={class:"font-light text-sm"},Me={class:"font-bold text-sm mb-1"},Ne={class:"font-light text-sm"},He={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},De={class:"w-25 flex gap-3"},Re={class:"form-label"},ze=["innerHTML"],Pe={key:1,class:"w-25 flex items-center ticket_details_area"},qe={class:"w-4 h-4 cursor-pointer"},Oe={class:"pr-6 pb-8 w-full lg:w-full flex-col"},Ke={class:"flex-1 pr-1"},Qe={class:"text-gray-500 text-xs"},Ge=["href"],Xe={class:"text-sm"},Ze={class:"a__buttons flex justify-end items-center"},Je=["onClick"],We=["onClick"],Ye={class:"flex-1 pr-1"},$e={class:"text-gray-500 text-xs"},et=["onClick"],tt={key:6,class:"pr-6 pb-8 w-full lg:w-1/3 flex items-center"},st={key:7,class:"flex flex-col w-full"},it={class:"assigned_user star__review pb-5 w-full lg:w-1/3 flex flex-col"},lt={class:"font-bold"},rt={class:"star-rating pt-5"},ot={class:"flex lg:w-1/4 mb-4"},nt={class:"btn-indigo",type:"submit"},at={class:"px-8 py-4 bg-gray-50 border-t border-gray-100 flex items-center"},dt={class:"max-w-full lg:w-2/5"},ut={class:"bg-white rounded-md shadow overflow-hidden ml-2 chat-area comment-box flex-1 flex flex-col"},ct={class:"flex-3"},mt={class:"chat-header flex flex-col pb-3"},ft={class:"text-xl"},gt={class:"text-sm font-light"},ht={class:"messages flex-1 overflow-auto reverse__order"},_t={key:0,class:"flex-2"},bt={class:"w-12 h-12 relative"},pt={key:0,class:"w-12 h-12 rounded-full mx-auto user_icon",alt:"chat-user"},kt={key:1,class:"flex-1 px-2 mt__wrap"},yt={key:0,class:"font-bold pb-2 text-sm pt-1"},vt=["innerHTML"],wt={class:"pl-4"},xt={class:"text-gray-500"},Vt={key:2,class:"flex-1 mt__wrap px-2 text-right"},Ct=["innerHTML"],St={class:"pr-4"},It={class:"text-gray-500"},At={class:"flex-2 pt-4 pb-3"},Ut={class:"write bg-white shadow flex rounded-lg"},Et={class:"flex-1 ticket_comment_edit"},Ft={class:"flex-2 w-35 p-2 flex content-center items-center"},Lt={class:"flex-1"};function Bt(i,e,t,U,s,c){const _=g("Head"),u=g("select-edit-input"),V=g("text-edit-input"),p=g("icon"),E=g("ckeditor"),j=g("textarea-input"),M=g("loading-button");return o(),a("div",null,[m(_,{title:i.$t(t.title)},null,8,["title"]),r("div",Ee,[r("div",Fe,[r("form",{onSubmit:e[23]||(e[23]=x((...l)=>c.update&&c.update(...l),["prevent"])),class:"bg-white rounded-md shadow overflow-hidden mr-2"},[r("div",Le,[t.auth.user.role.slug!=="customer"?(o(),f(u,{key:0,placeholder:"Search customer",onInput:c.doFilter,items:t.customers,modelValue:s.form.user_id,"onUpdate:modelValue":e[0]||(e[0]=l=>s.form.user_id=l),error:s.form.errors.user_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Customer"),value:t.ticket.user,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["onInput","items","modelValue","error","label","value","editable"])):d("",!0),m(u,{placeholder:"Search priority",items:t.priorities,modelValue:s.form.priority_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s.form.priority_id=l),error:s.form.errors.priority_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Priority"),value:t.ticket.priority,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"]),t.auth.user.role.slug!=="customer"&&!(t.hidden_fields&&t.hidden_fields.includes("assigned_to"))?(o(),f(u,{key:1,placeholder:"Search user",onInput:c.doFilterUsersExceptCustomer,items:t.usersExceptCustomers,modelValue:s.form.assigned_to,"onUpdate:modelValue":e[2]||(e[2]=l=>s.form.assigned_to=l),error:s.form.errors.assigned_to,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Assigned to"),value:t.ticket.assigned_user??"Not Assigned",editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["onInput","items","modelValue","error","label","value","editable"])):d("",!0),m(u,{placeholder:"Select status to change",items:t.statuses,modelValue:s.form.status_id,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form.status_id=l),error:s.form.errors.status_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Status"),value:t.ticket.status?t.ticket.status.name:"N/A",editable:t.auth.user.role.slug!=="customer"&&s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"]),t.hidden_fields&&t.hidden_fields.includes("ticket_type")?d("",!0):(o(),f(u,{key:2,placeholder:"Search type",items:t.types,modelValue:s.form.type_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.form.type_id=l),error:s.form.errors.type_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Ticket type"),value:t.ticket.type,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])),t.hidden_fields&&t.hidden_fields.includes("department")?d("",!0):(o(),f(u,{key:3,onChange:e[5]||(e[5]=l=>c.getCategories()),placeholder:"Search department",items:t.departments,modelValue:s.form.department_id,"onUpdate:modelValue":e[6]||(e[6]=l=>s.form.department_id=l),error:s.form.errors.department_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Department"),value:t.ticket.department,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])),!(t.hidden_fields&&t.hidden_fields.includes("category"))&&s.form.department_id?(o(),f(u,{key:4,ref:"category",onChange:e[7]||(e[7]=l=>c.getSubCategories()),placeholder:"Search category",items:s.categories,modelValue:s.form.category_id,"onUpdate:modelValue":e[8]||(e[8]=l=>s.form.category_id=l),error:s.form.errors.category_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Category"),value:t.ticket.category,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])):d("",!0),!(t.hidden_fields&&t.hidden_fields.includes("category"))&&s.form.category_id?(o(),f(u,{key:5,ref:"sub_category",placeholder:"Search category",items:s.sub_categories,modelValue:s.form.sub_category_id,"onUpdate:modelValue":e[9]||(e[9]=l=>s.form.sub_category_id=l),error:s.form.errors.sub_category_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Sub Category"),value:t.ticket.sub_category,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])):d("",!0),r("div",Be,[r("div",Te,n(i.$t("Created")),1),r("div",je,n(i.moment(t.ticket.created_at).fromNow()),1)]),(o(!0),a(v,null,w(t.entries,l=>(o(),a("div",{class:"assigned_user pr-6 pb-8 w-full lg:w-1/3 flex flex-col",key:l.id},[r("div",Me,n(i.$t(l.label)),1),r("div",Ne,n(l.value),1)]))),128)),m(V,{editable:s.user_access.ticket.update&&!t.ticket.closed,modelValue:s.form.subject,"onUpdate:modelValue":e[10]||(e[10]=l=>s.form.subject=l),value:t.ticket.subject,error:s.form.errors.subject,class:"pr-6 pb-8 w-full lg:w-2/3",label:i.$t("Subject")},null,8,["editable","modelValue","value","error","label"]),r("div",He,[r("div",De,[r("label",Re,n(i.$t("Request Details")),1),!s.enableEditor&&s.user_access.ticket.update&&!t.ticket.closed?(o(),f(p,{key:0,name:"edit",onClick:e[11]||(e[11]=l=>s.enableEditor=!s.enableEditor),class:"w-4 h-4 mr-1 cursor-pointer"})):d("",!0)]),s.enableEditor?d("",!0):(o(),a("div",{key:0,class:"font-light text-sm",innerHTML:t.ticket.details},null,8,ze)),s.enableEditor?(o(),a("div",Pe,[m(E,{id:"ticketDetails",editor:s.editor,modelValue:s.form.details,"onUpdate:modelValue":e[12]||(e[12]=l=>s.form.details=l),config:s.editorConfig},null,8,["editor","modelValue","config"]),r("div",qe,[m(p,{onClick:e[13]||(e[13]=l=>s.enableEditor=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})])])):d("",!0)]),r("input",{ref:"file",type:"file",accept:".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf, .zip",class:"hidden",multiple:"multiple",onChange:e[14]||(e[14]=(...l)=>c.fileInputChange&&c.fileInputChange(...l))},null,544),r("div",Oe,[r("button",{type:"button",class:"btn flex justify-center items-center pb-3 border-0 pl-0",onClick:e[15]||(e[15]=(...l)=>c.fileBrowse&&c.fileBrowse(...l))},[m(p,{name:"file",class:"flex-shrink-0 h-5 fill-gray-400 pr-1"}),e[26]||(e[26]=h()),r("strong",null,n(i.$t("Attach File")),1)]),t.attachments.length?(o(!0),a(v,{key:0},w(t.attachments,(l,b)=>(o(),a("div",{class:"flex items-center justify-between pr-6 pt-8 w-full",key:b},[r("div",Ke,[h(n(l.name)+" ",1),r("span",Qe,"("+n(c.getFileSize(l.size))+")",1),e[27]||(e[27]=h()),l.user?(o(),a("a",{key:0,class:"text-sm",href:this.route("users.edit",l.user.id)},n(l.user.first_name)+" "+n(l.user.last_name),9,Ge)):d("",!0),e[28]||(e[28]=h(" at ")),r("span",Xe,n(l.created_at),1)]),r("div",Ze,[r("button",{type:"button",class:"btn flex items-center",onClick:F=>c.downloadAttachment(l)},n(i.$t("Download")),9,Je),r("button",{type:"button",class:"btn flex items-center ml-3",onClick:F=>c.removeAttachment(l,b)},n(i.$t("Remove")),9,We)])]))),128)):d("",!0),s.form.files.length?(o(!0),a(v,{key:1},w(s.form.files,(l,b)=>(o(),a("div",{class:"flex items-center justify-between pr-6 pt-8 w-full lg:w-1/2",key:b},[r("div",Ye,[h(n(l.name)+" ",1),r("span",$e,"("+n(c.getFileSize(l.size))+")",1)]),s.user_access.ticket.delete&&t.ticket.status&&!t.ticket.closed?(o(),a("button",{key:0,type:"button",class:"btn flex justify-center items-center",onClick:F=>c.fileRemove(l,b)},n(i.$t("Remove")),9,et)):d("",!0)]))),128)):d("",!0)]),t.ticket.status&&t.ticket.closed&&t.ticket.review?(o(),a("div",tt,[r("strong",null,n(i.$t("Rating"))+": ",1),h("   "+n(t.ticket.review.rating)+" ",1),r("p",null,n(t.ticket.review.review),1)])):d("",!0),t.ticket.status&&t.ticket.closed&&!t.ticket.review&&t.auth.user.role.slug==="customer"?(o(),a("div",st,[r("div",it,[r("div",lt,n(i.$t("How do you rate this support service?")),1),r("div",rt,[k(r("input",{type:"radio",id:"5-stars",name:"rating","onUpdate:modelValue":e[16]||(e[16]=l=>s.form.rating=l),value:"5"},null,512),[[y,s.form.rating]]),e[29]||(e[29]=r("label",{for:"5-stars",class:"star"},"★",-1)),k(r("input",{type:"radio",id:"4-stars",name:"rating","onUpdate:modelValue":e[17]||(e[17]=l=>s.form.rating=l),value:"4"},null,512),[[y,s.form.rating]]),e[30]||(e[30]=r("label",{for:"4-stars",class:"star"},"★",-1)),k(r("input",{type:"radio",id:"3-stars",name:"rating","onUpdate:modelValue":e[18]||(e[18]=l=>s.form.rating=l),value:"3"},null,512),[[y,s.form.rating]]),e[31]||(e[31]=r("label",{for:"3-stars",class:"star"},"★",-1)),k(r("input",{type:"radio",id:"2-stars",name:"rating","onUpdate:modelValue":e[19]||(e[19]=l=>s.form.rating=l),value:"2"},null,512),[[y,s.form.rating]]),e[32]||(e[32]=r("label",{for:"2-stars",class:"star"},"★",-1)),k(r("input",{type:"radio",id:"1-star",name:"rating","onUpdate:modelValue":e[20]||(e[20]=l=>s.form.rating=l),value:"1"},null,512),[[y,s.form.rating]]),e[33]||(e[33]=r("label",{for:"1-star",class:"star"},"★",-1))])]),m(j,{modelValue:s.form.review,"onUpdate:modelValue":e[21]||(e[21]=l=>s.form.review=l),error:s.form.errors.review,class:"pr-6 pb-4 w-full lg:w-1/3",label:i.$t("Feedback")},null,8,["modelValue","error","label"]),r("div",ot,[r("button",nt,n(i.$t("Submit")),1)])])):d("",!0)]),r("div",at,[s.user_access.ticket.delete?(o(),a("button",{key:0,class:"text-red-600 hover:underline",tabindex:"-1",type:"button",onClick:e[22]||(e[22]=(...l)=>c.destroy&&c.destroy(...l))},n(i.$t("Delete")),1)):d("",!0),m(M,{loading:s.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:D(()=>[h(n(i.$t("Save")),1)]),_:1},8,["loading"])])],32)]),r("div",dt,[r("div",ut,[r("div",ct,[r("div",mt,[r("h3",ft,n(i.$t("Ticket discussion")),1),r("p",gt,n(i.$t("Comment histories for this ticket will be available here.")),1)])]),r("div",ht,[(o(!0),a(v,null,w(t.comments.slice().reverse(),(l,b)=>(o(),a("div",{key:b,class:"message mb-4 flex"},[l.user_id!==s.user.id?(o(),a("div",_t,[r("div",bt,[l.user?(o(),a("span",pt,n(Array.from(l.user.first_name)[0]),1)):d("",!0)])])):d("",!0),l.user_id!==s.user.id?(o(),a("div",kt,[l.user?(o(),a("h3",yt,n(l.user.first_name)+" "+n(l.user.last_name),1)):d("",!0),r("div",{class:"inline-block bg-gray-300 user-comment-round p-2 px-3 text-gray-700 leading-5 ckc",innerHTML:l.details},null,8,vt),r("div",wt,[r("small",xt,n(i.moment(l.updated_at).fromNow(!0)),1)])])):d("",!0),l.user_id===s.user.id?(o(),a("div",Vt,[r("div",{class:"inline-block bg-blue rounded p-2 px-3 text-white leading-5 ckc",innerHTML:l.details},null,8,Ct),r("div",St,[r("small",It,n(i.moment(l.updated_at).fromNow(!0)),1)])])):d("",!0)]))),128))]),r("div",At,[r("div",Ut,[r("div",Et,[m(E,{id:"ticketDiscussion",editor:s.editor,modelValue:s.comment,"onUpdate:modelValue":e[24]||(e[24]=l=>s.comment=l),name:"comment",config:s.editorConfig,autofocus:""},null,8,["editor","modelValue","config"])]),r("div",Ft,[r("div",Lt,[r("button",{class:"bg-blue w-10 h-10 rounded-full flex justify-center items-center",onClick:e[25]||(e[25]=(...l)=>c.submitComment&&c.submitComment(...l))},[m(p,{class:"w-4 h-4 fill-gray-100",name:"send"})])])])])])])])])])}const Kt=A(Ue,[["render",Bt]]);export{Kt as default};
