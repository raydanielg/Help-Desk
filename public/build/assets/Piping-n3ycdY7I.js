import{i as P,Z as b,k as g,r as m,c as d,a as r,b as l,d as _,t as n,f as I,v as h,h as A,m as w,w as M,o as u,e as O}from"./app-a1pcr069.js";import{I as v}from"./moment-BbZOc2s_.js";import{L as y}from"./Layout-CCj0oP25.js";import{P as x}from"./Pagination-CmEu2SMB.js";import{T as S}from"./TextInput-BV_CAnm2.js";import{S as R}from"./SelectInput-LDo5GZlZ.js";import{L as T}from"./LoadingButton-D7uFng42.js";import{_ as V}from"./FlashMessages-CFOcLP80.js";import"./v4-SoommWqA.js";const k={metaInfo:{title:"Priorities"},components:{Icon:v,Link:P,Head:b,Pagination:x,TextInput:S,SelectInput:R,LoadingButton:T},layout:y,props:{title:String,keys:Object,option:Object,demo:Boolean},remember:"form",data(){return{form:this.$inertia.form({IMAP_HOST:this.keys.IMAP_HOST.value,IMAP_PORT:this.keys.IMAP_PORT.value,IMAP_PROTOCOL:this.keys.IMAP_PROTOCOL.value,IMAP_ENCRYPTION:this.keys.IMAP_ENCRYPTION.value,IMAP_USERNAME:this.keys.IMAP_USERNAME.value,IMAP_PASSWORD:this.keys.IMAP_PASSWORD.value,enable_piping:this.option})}},methods:{update(){this.form.put(this.route("settings.piping.update"),{onSuccess:()=>{g.get(this.route("clear.cache","config")).then(s=>{})}})}}},E={class:"bg-white rounded-md shadow overflow-hidden mr-2"},N={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},C={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},U={class:"font-bold text-sm mb-1"},L={class:"text-sm pt-1 mb-1"},H={class:"flex items-center justify-start pr-6 pb-8 w-full lg:w-1/3"},j={for:"enablePiping",class:"flex toggle_swtich items-center cursor-pointer"},D={class:"relative"},Y={class:"ml-3 text-sm"},B={class:"px-8 flex"},W={key:0,class:"pt-1 mb-1"},q={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},F={class:"p-8 flex flex-wrap"},Z={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},z={class:"font-bold text-sm mb-1"},G={class:"px-8 py-4 bg-gray-50 border-t border-gray-100 flex items-center"};function J(s,e,a,K,o,p){const f=m("Head"),i=m("text-input"),c=m("loading-button");return u(),d("div",null,[r(f,{title:a.title},null,8,["title"]),l("div",E,[l("form",{onSubmit:e[7]||(e[7]=_((...t)=>p.update&&p.update(...t),["prevent"]))},[l("div",N,[l("div",C,[l("div",U,n(s.$t("Enable Email Piping Option")),1),l("p",L,n(s.$t("Ticket create automatically including attachment when receive a new email.")),1)]),l("div",H,[l("label",j,[l("div",D,[I(l("input",{id:"enablePiping",type:"checkbox",class:"sr-only","onUpdate:modelValue":e[0]||(e[0]=t=>a.option.value=t)},null,512),[[h,a.option.value]]),e[8]||(e[8]=l("div",{class:"w-10 h-4 bg-gray-400 rounded-full shadow-inner"},null,-1)),e[9]||(e[9]=l("div",{class:"dot absolute w-6 h-6 bg-white rounded-full shadow -left-1 -top-1 transition"},null,-1))]),l("div",Y,n(a.option.name),1)])])]),l("div",B,[a.demo?(u(),d("p",W,n(s.$t("You can try to sending email with the `piping@atorali.com` email address to test on the demo mode.")),1)):A("",!0)]),l("div",q,[r(i,{type:"text",modelValue:o.form.IMAP_HOST,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.IMAP_HOST=t),error:o.form.errors.IMAP_HOST,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Host")},null,8,["modelValue","error","label"]),r(i,{type:"text",modelValue:o.form.IMAP_PORT,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.IMAP_PORT=t),error:o.form.errors.IMAP_PORT,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Port")},null,8,["modelValue","error","label"]),r(i,{type:"text",modelValue:o.form.IMAP_PROTOCOL,"onUpdate:modelValue":e[3]||(e[3]=t=>o.form.IMAP_PROTOCOL=t),error:o.form.errors.IMAP_PROTOCOL,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Protocol"),placeholder:s.$t("e.g. imap")},null,8,["modelValue","error","label","placeholder"]),r(i,{type:"text",modelValue:o.form.IMAP_ENCRYPTION,"onUpdate:modelValue":e[4]||(e[4]=t=>o.form.IMAP_ENCRYPTION=t),error:o.form.errors.IMAP_ENCRYPTION,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Encryption"),placeholder:s.$t("e.g. ssl")},null,8,["modelValue","error","label","placeholder"]),r(i,{type:"text",modelValue:o.form.IMAP_USERNAME,"onUpdate:modelValue":e[5]||(e[5]=t=>o.form.IMAP_USERNAME=t),error:o.form.errors.IMAP_USERNAME,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Username")},null,8,["modelValue","error","label"]),r(i,{type:"text",modelValue:o.form.IMAP_PASSWORD,"onUpdate:modelValue":e[6]||(e[6]=t=>o.form.IMAP_PASSWORD=t),error:o.form.errors.IMAP_PASSWORD,class:"pr-6 pb-8 w-full lg:w-1/3",label:s.$t("IMAP Password")},null,8,["modelValue","error","label"])]),l("div",F,[l("div",Z,[l("div",z,n(s.$t("Email Piping Cronjob Instruction")),1),e[10]||(e[10]=w('<p class="mt-2 font-light">If you would like to create automatically ticket from sending email you need set a cron job for that which one run like every 3 minute.</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/3 * * * * /usr/bin/php artisan command:piping_email</code><p class="mt-3 font-light">For the shared hosting like cPanel or any panel server you can call url as like this</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/3 * * * * wget -q -O - https://website.com/cron/piping &gt;/dev/null 2&gt;&amp;1</code><img src="/images/cron_job_example.png" alt="cron job example">',5))])]),l("div",G,[r(c,{loading:o.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:M(()=>[O(n(s.$t("Save")),1)]),_:1},8,["loading"])])],32)])])}const ie=V(k,[["render",J]]);export{ie as default};
