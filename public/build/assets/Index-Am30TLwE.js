import{i as U,Z as E,r as c,c as i,a,b as s,d as S,w as v,h as w,t as n,F as m,j as f,m as C,o as r,f as _,v as p,e as I}from"./app-a1pcr069.js";import{I as L}from"./moment-BbZOc2s_.js";import{L as F}from"./Layout-CCj0oP25.js";import{P as N}from"./Pagination-CmEu2SMB.js";import{T as j}from"./TextInput-BV_CAnm2.js";import{T as B}from"./TextareaInput-CORLWzzy.js";import{S as A}from"./SelectInput-LDo5GZlZ.js";import{L as P}from"./LoadingButton-D7uFng42.js";import{F as R}from"./FileInput-D0d9ka2x.js";import{_ as T}from"./FlashMessages-CFOcLP80.js";import"./v4-SoommWqA.js";const D={metaInfo:{title:"Priorities"},components:{Icon:L,Link:U,Head:E,FileInput:R,Pagination:N,TextInput:j,TextareaInput:B,SelectInput:A,LoadingButton:P},layout:F,props:{title:String,site_key:String,settings:Object,languages:Array,users:Array,pusher:Boolean},remember:"form",data(){return{form:this.$inertia.form({app_name:this.settings.app_name.value,logo:null,site_key:this.site_key,default_recipient:this.settings.default_recipient?this.settings.default_recipient.value:1,logo_white:null,favicon:null,main_logo:"/images/logo.png",main_logo_white:"/images/logo_white.png",main_favicon:"/favicon.png",default_language:this.settings.default_language.value,footer_text:this.settings.footer_text.value,custom_css:typeof this.settings.custom_css<"u"&&this.settings.custom_css?this.settings.custom_css.value:null,email_notifications:this.settings.email_notifications.value.map(l=>({name:l.name,slug:l.slug,value:!!l.value})),enable_options:this.settings.enable_options.value.map(l=>({name:l.name,slug:l.slug,value:!!l.value})),hide_ticket_fields:this.settings.hide_ticket_fields&&this.settings.hide_ticket_fields.value?this.settings.hide_ticket_fields.value:[],required_ticket_fields:this.settings.required_ticket_fields&&this.settings.required_ticket_fields.value?this.settings.required_ticket_fields.value:[]}),hide_ticket_fields:["department","category","sub_category","ticket_type","assigned_to"],required_ticket_fields:["department","category","sub_category","ticket_type","assigned_to"]}},created(){console.log(this.settings.hide_ticket_fields),console.log(this.settings.required_ticket_fields),console.log(this.form)},methods:{checkRequiredFields(l){l.target.checked&&["category","sub_category"].includes(l.target.value)&&(this.form.required_ticket_fields.includes("category")||this.form.required_ticket_fields.push("category"),this.form.required_ticket_fields.includes("department")||this.form.required_ticket_fields.push("department")),!l.target.checked&&["department"].includes(l.target.value)&&(this.form.required_ticket_fields.includes("category")&&this.removeElement(this.form.required_ticket_fields,"category"),this.form.required_ticket_fields.includes("sub_category")&&this.removeElement(this.form.required_ticket_fields,"sub_category")),!l.target.checked&&["category"].includes(l.target.value)&&this.form.required_ticket_fields.includes("sub_category")&&this.removeElement(this.form.required_ticket_fields,"sub_category")},removeElement(l,o){const u=l.indexOf(o);l.splice(u,1)},update(){const l=this;if(this.form.enable_options.find(u=>u.slug="chat").value&&!this.pusher){alert("Please setup the pusher configuration to enable chat.");return}this.form.post(this.route("global.update"),{onSuccess:()=>{const u=l.$page.props.flash.success;this.form.logo=null,this.form.logo_white=null,u&&window.location.reload()}})}}},H={class:"bg-white rounded-md shadow overflow-hidden mr-2"},O={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},M=["value"],z={class:"pb-8 pr-6 w-full flex lg:w-1/3"},Q={class:"w-full lg:w-1/5 flex items-end justify-center"},G=["src"],J={class:"pb-8 pr-6 w-full flex lg:w-1/3"},K={class:"w-full lg:w-1/5 flex items-end justify-center"},W=["src"],Z={class:"pb-8 pr-6 w-full flex lg:w-1/3"},X={class:"w-full lg:w-1/5 flex items-end justify-center"},Y=["src"],$={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},ee={class:"font-bold text-sm mb-1"},te=["for"],se={class:"flex items-center mb-3"},le=["id","onUpdate:modelValue"],oe={class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},ie={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},re={class:"font-bold text-sm mb-1"},ne=["for"],ae={class:"flex items-center mb-3"},ue=["id","onUpdate:modelValue"],de={class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},ce={class:"flex w-full"},me=["value"],fe={class:"pr-6 pb-1 w-full lg:w-full flex flex-col"},_e={class:"font-bold text-sm mb-1"},pe={class:"flex flex-wrap w-full pb-8"},ge=["for"],he=["id","value"],be={class:"text-sm"},ve={class:"pr-6 pb-1 w-full lg:w-full flex flex-col"},we={class:"font-bold text-sm mb-1"},ke={class:"flex flex-wrap w-full pb-8"},ye=["for"],xe=["id","value"],Ve={class:"text-sm"},qe={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},Ue={class:"font-bold text-sm mb-1"},Ee={class:"px-8 py-4 bg-gray-50 border-t border-gray-100 flex items-center"};function Se(l,o,u,Ce,t,g){const x=c("Head"),k=c("text-input"),y=c("select-input"),h=c("file-input"),V=c("textarea-input"),q=c("loading-button");return r(),i("div",null,[a(x,{title:u.title},null,8,["title"]),s("div",H,[s("form",{onSubmit:o[11]||(o[11]=S((...e)=>g.update&&g.update(...e),["prevent"]))},[s("div",O,[a(k,{modelValue:t.form.app_name,"onUpdate:modelValue":o[0]||(o[0]=e=>t.form.app_name=e),error:t.form.errors.app_name,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("App Name")},null,8,["modelValue","error","label"]),a(k,{modelValue:t.form.site_key,"onUpdate:modelValue":o[1]||(o[1]=e=>t.form.site_key=e),error:t.form.errors.site_key,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Google ReCaptcha Site Key")},null,8,["modelValue","error","label"]),a(y,{modelValue:t.form.default_language,"onUpdate:modelValue":o[2]||(o[2]=e=>t.form.default_language=e),error:t.form.errors.default_language,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Default Language")},{default:v(()=>[(r(!0),i(m,null,f(u.languages,e=>(r(),i("option",{key:e.id,value:e.code},n(e.name),9,M))),128))]),_:1},8,["modelValue","error","label"]),s("div",z,[a(h,{modelValue:t.form.logo,"onUpdate:modelValue":o[3]||(o[3]=e=>t.form.logo=e),error:t.form.errors.logo,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Logo"},null,8,["modelValue","error"]),s("div",Q,[t.form.main_logo?(r(),i("img",{key:0,class:"block mb-2",src:t.form.main_logo},null,8,G)):w("",!0)])]),s("div",J,[a(h,{modelValue:t.form.logo_white,"onUpdate:modelValue":o[4]||(o[4]=e=>t.form.logo_white=e),error:t.form.errors.logo_white,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Logo White"},null,8,["modelValue","error"]),s("div",K,[t.form.main_logo_white?(r(),i("img",{key:0,class:"block mb-2 rounded bg-dark",src:t.form.main_logo_white},null,8,W)):w("",!0)])]),s("div",Z,[a(h,{modelValue:t.form.favicon,"onUpdate:modelValue":o[5]||(o[5]=e=>t.form.favicon=e),error:t.form.errors.favicon,class:"pr-2 w-full lg:w-4/5",type:"file",accept:"image/png",label:"Favicon"},null,8,["modelValue","error"]),s("div",X,[t.form.main_favicon?(r(),i("img",{key:0,class:"block mb-2",src:t.form.main_favicon},null,8,Y)):w("",!0)])]),s("div",$,[s("div",ee,n(l.$t("Enable Options")),1)]),(r(!0),i(m,null,f(t.form.enable_options,(e,d)=>(r(),i("div",{class:"flex items-center justify-start pr-6 pb-8 w-full lg:w-1/3",key:d},[s("label",{for:e.slug,class:"flex toggle_swtich items-center cursor-pointer"},[s("div",se,[_(s("input",{id:e.slug,type:"checkbox","onUpdate:modelValue":b=>e.value=b,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"},null,8,le),[[p,e.value]]),s("div",oe,n(e.name),1)])],8,te)]))),128)),s("div",ie,[s("div",re,n(l.$t("Email Notifications")),1)]),(r(!0),i(m,null,f(t.form.email_notifications,(e,d)=>(r(),i("div",{class:"flex items-center justify-start pr-6 pb-8 w-full lg:w-1/3",key:d},[s("label",{for:e.slug,class:"flex toggle_swtich items-center cursor-pointer"},[s("div",ae,[_(s("input",{id:e.slug,type:"checkbox","onUpdate:modelValue":b=>e.value=b,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600"},null,8,ue),[[p,e.value]]),s("div",de,n(e.name),1)])],8,ne)]))),128)),s("div",ce,[a(y,{modelValue:t.form.default_recipient,"onUpdate:modelValue":o[6]||(o[6]=e=>t.form.default_recipient=e),error:t.form.errors.default_recipient,class:"pr-6 pb-8 w-full lg:w-1/3",label:l.$t("Default Email Recipient for customer ticket")},{default:v(()=>[(r(!0),i(m,null,f(u.users,e=>(r(),i("option",{key:e.id,value:e.id},n(e.name),9,me))),128))]),_:1},8,["modelValue","error","label"])]),s("div",fe,[s("div",_e,n(l.$t("Hide ticket fields")),1)]),s("div",pe,[(r(!0),i(m,null,f(t.hide_ticket_fields,e=>(r(),i("label",{class:"select-none flex items-center pr-8 capitalize",for:"htf_"+e},[_(s("input",{id:"htf_"+e,"onUpdate:modelValue":o[7]||(o[7]=d=>t.form.hide_ticket_fields=d),class:"mr-1",value:e,type:"checkbox"},null,8,he),[[p,t.form.hide_ticket_fields]]),s("span",be,n(e.replace(/_/g," ")),1)],8,ge))),256))]),s("div",ve,[s("div",we,n(l.$t("Required fields to submit ticket")),1)]),s("div",ke,[(r(!0),i(m,null,f(t.required_ticket_fields,e=>(r(),i("label",{class:"select-none flex items-center pr-8 capitalize",for:"rtf_"+e},[_(s("input",{onChange:o[8]||(o[8]=d=>g.checkRequiredFields(d)),id:"rtf_"+e,"onUpdate:modelValue":o[9]||(o[9]=d=>t.form.required_ticket_fields=d),class:"mr-1",value:e,type:"checkbox"},null,40,xe),[[p,t.form.required_ticket_fields]]),s("span",Ve,n(e.replace(/_/g," ")),1)],8,ye))),256))]),s("div",qe,[s("div",Ue,n(l.$t("Cron Job Instruction")),1),o[12]||(o[12]=C('<p class="mt-2 font-light">If you would like to send mail without delaying you need to set a cron job for that with once every 3 minute.</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/2 * * * * /usr/bin/php artisan queue:work --queue=high,default --stop-when-empty</code><p class="mt-3 font-light">For the shared hosting like cPanel or any panel server you can call url as like this</p><code class="mt-5 mb-5 prose block whitespace-pre mt-1 text-sm">*/2 * * * * wget -q -O - https://website.com/cron/queue_work &gt;/dev/null 2&gt;&amp;1</code><p class="mt-3">After adding one of these above option, you need to enable Queue with add <code>QUEUE_ENABLE=true</code> on the .env file </p>',5))]),a(V,{modelValue:t.form.custom_css,"onUpdate:modelValue":o[10]||(o[10]=e=>t.form.custom_css=e),error:t.form.errors.custom_css,rows:15,class:"pb-6 w-full",placeholder:"your custom css here..",label:l.$t("Custom CSS")},null,8,["modelValue","error","label"])]),s("div",Ee,[a(q,{loading:t.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:v(()=>[I(n(l.$t("Save")),1)]),_:1},8,["loading"])])],32)])])}const He=T(D,[["render",Se]]);export{He as default};
